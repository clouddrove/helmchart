{{- if .Values.externalSecrets.enabled }}
{{- if .Values.externalSecrets.createSecretStore }}
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: {{ .Values.externalSecrets.secretStore }}
  labels:
    {{- include "adrija.labels" . | nindent 4 }}
spec:
  provider:
    onepassword:
      # 1Password Connect configuration
      # You need to have 1Password Connect running in your cluster
      # See: https://support.1password.com/connect-kubernetes/
      connect:
        url: {{ .Values.externalSecrets.onepassword.connectUrl | default "http://onepassword-connect-api:8080" }}
        # Optional: Use service account token for authentication
        # tokenSecretRef:
        #   name: onepassword-connect-token
        #   key: token
      # Alternative: Use 1Password Connect credentials
      # auth:
      #   secretRef:
      #     connectTokenSecretRef:
      #       name: onepassword-connect-credentials
      #       key: token
{{- end }}
{{- end }}

