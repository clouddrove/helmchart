# -------------------
# Image
# -------------------
image:
  registry: ""
  repository: adrija
  tag: "latest"
  pullPolicy: IfNotPresent

imagePullSecrets: []

# -------------------
# Replica / Scaling
# -------------------
replicaCount: 2

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

  behavior:
    enabled: true
    config:
      scaleDown:
        stabilizationWindowSeconds: 300
        policies:
          - type: Percent
            value: 50
            periodSeconds: 60
      scaleUp:
        stabilizationWindowSeconds: 0
        policies:
          - type: Percent
            value: 100
            periodSeconds: 15
          - type: Pods
            value: 2
            periodSeconds: 15
        selectPolicy: Max

# -------------------
# Service Account
# -------------------
serviceAccount:
  enabled: true
  annotations: {}
  name: ""

# -------------------
# Pod & Container Security
# -------------------
podSecurityContext:
  fsGroup: 1000
  runAsNonRoot: true
  runAsUser: 1000
  seccompProfile:
    type: RuntimeDefault

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false

# -------------------
# Pod Disruption Budget
# -------------------
poddisruptionbudget:
  enabled: true
  minAvailable: 1

# -------------------
# Resources
# -------------------
resources:
  limits:
    cpu: 1000m
    memory: 512Mi
  requests:
    cpu: 500m
    memory: 256Mi

# -------------------
# Service / Ports
# -------------------
service:
  type: ClusterIP
  name: http
  targetPort: http
  port: 3000
  annotations: {}

dnsPolicy: ClusterFirst

# -------------------
# Ingress
# -------------------
ingress:
  enabled: false
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
  hosts:
    - host: adrija.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: adrija-tls
      hosts:
        - adrija.example.com

# -------------------
# Secret
# -------------------
secret:
  enabled: false
  existingSecretName: "api-key-bot-token-secret"
  secrets: {}
    # SLACK_BOT_TOKEN: ""
    # SLACK_APP_TOKEN: ""
    # GEMINI_API_KEY: ""
    # ANTHROPIC_API_KEY: ""
    # OPENAI_API_KEY: ""

# -------------------
# ConfigMap (ALL non-secret envs)
# -------------------
configmap:
  enabled: true
  configs:
    ENABLE_GEMINI: ""
    ENABLE_CLAUDE: ""
    ENABLE_OPENAI: ""
    DEFAULT_AI_PROVIDER: ""
    GEMINI_MODEL: ""
    OPENAI_MODEL: ""
    AUTO_RESPOND_CHANNEL: ""
    CONVERSATION_MAX_HISTORY: ""
    CONVERSATION_TTL_HOURS: ""
    RATE_LIMIT_MAX_REQUESTS: ""
    RATE_LIMIT_WINDOW_SECONDS: ""
    METRICS_MAX_HISTORY: ""
    PORT: ""


# -------------------
# ServiceMonitor
# -------------------
metrics:
  enabled: true
  serviceMonitor:
    enabled: false
    targetNamespace: ""
    endpoints:
      - port: metrics
        path: /metrics
        interval: 30s
        scrapeTimeout: 10s
    labels: {}
    annotations: {}
      # prometheus.io/scrape: "true"
      # prometheus.io/path: "/metrics"
      # prometheus.io/port: "8000"
