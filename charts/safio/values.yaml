replicaCount: 1

image:
  repository: ghcr.io/your-org/safio
  tag: ""
  pullPolicy: IfNotPresent

imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  name: ""
  annotations: {}

podAnnotations: {}
podLabels: {}

podSecurityContext: {}

securityContext:
  runAsNonRoot: true
  allowPrivilegeEscalation: false

service:
  enabled: true
  type: ClusterIP
  ports:
    - name: http
      port: 3000
      targetPort: http
    - name: health
      port: 3001
      targetPort: health

resources:
  limits:
    cpu: 250m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 256Mi

nodeSelector: {}

tolerations: []

affinity: {}

env:
  NODE_ENV: production
  PORT: "3000"
  HEALTH_PORT: "3001"
  ADMIN_DASHBOARD_PORT: "3100"
  SLACK_LOG_LEVEL: INFO
  ADMIN_USER_IDS: ""
  ALLOWED_USER_IDS: ""
  ALLOWED_CHANNEL_IDS: ""
  ALLOWED_USERGROUP_IDS: ""
  VAULT_CHANNEL_MAP_JSON: "{}"
  CHANNEL_VAULT_MAP_JSON: "{}"
  POLICY_REQUIRE_CHANNEL_AND_MEMBERSHIP: "false"
  POLICY_SYNC_USERGROUP_IDS: ""
  POLICY_SYNC_INTERVAL_MS: "86400000"
  POLICY_SYNC_PRESERVE_MANUAL: "true"
  OP_PATH: ""
  OP_SHARE_FLAGS: ""
  PG_POOL_MAX: "5"
  AUDIT_STORE_URL: "false"
  AUDIT_STORE_ITEM_TITLE: "false"
  AUDIT_STORAGE: postgres
  RATE_LIMIT_MAX_REQUESTS: "0"
  RATE_LIMIT_WINDOW_MINUTES: "60"
  RATE_LIMIT_MESSAGE: ""
  AUDIT_RETENTION_DAYS: "0"
  PG_CONNECTION_STRING: ""

# Secret Management
# 
# Sensitive tokens should NOT be stored in values files.
# Use one of these approaches:
#
# Option 1: Use existingSecret (recommended for production)
# Create a Kubernetes secret separately and reference it:
#   existingSecret: "safio-secrets"
#
# Option 2: Use secretEnv (only for development/testing)
#   secretEnv:
#     SLACK_BOT_TOKEN: "..."
#     SLACK_APP_TOKEN: "..."
#
# See deploy/README.md for instructions on creating secrets.
existingSecret: ""

# Secret environment variables (leave empty if using existingSecret)
# These should only be used for local development/testing
# Note: PG_CONNECTION_STRING is in env section above (internal service, not a secret)
secretEnv:
  SLACK_BOT_TOKEN: ""
  SLACK_APP_TOKEN: ""
  SLACK_SIGNING_SECRET: ""
  OP_SERVICE_ACCOUNT_TOKEN: ""
  OP_SESSION: ""
  ADMIN_DASHBOARD_TOKEN: ""

existingConfigMap: ""

extraEnv: []

extraEnvFrom: []

extraVolumes: []

extraVolumeMounts: []

livenessProbe:
  httpGet:
    path: /health
    port: health
  initialDelaySeconds: 10
  periodSeconds: 30

readinessProbe:
  httpGet:
    path: /health
    port: health
  initialDelaySeconds: 5
  periodSeconds: 15

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 75
